[0;34m[INFO][0m Deployment started at Tue Nov 18 14:21:08 CST 2025
[0;34m[INFO][0m Environment: dev
[0;34m[INFO][0m AWS Account: 899626030376
[0;34m[INFO][0m Region: us-east-1
[0;34m[INFO][0m Log file: /Users/adambehnke/Projects/noaa_storefront/deployment/deployment_20251118_142108.log
[0;34m[INFO][0m Checking prerequisites...
[0;32m[SUCCESS][0m Prerequisites verified
[0;34m[INFO][0m [1/7] Creating backup of current handler...
[0;32m[SUCCESS][0m Backup created at: /Users/adambehnke/Projects/noaa_storefront/backups/20251118_142108
[0;34m[INFO][0m [2/7] Replacing handler with AI multi-pond code...
[0;32m[SUCCESS][0m Handler replaced with AI code
[0;34m[INFO][0m [3/7] Ensuring Bedrock dependencies...
[0;32m[SUCCESS][0m Dependencies configured
[0;34m[INFO][0m [4/7] Packaging Lambda function...
[0;34m[INFO][0m Creating ZIP package...
[0;32m[SUCCESS][0m Package created: 692K
[0;34m[INFO][0m [5/7] Deploying to AWS Lambda...
[0;34m[INFO][0m Updating Lambda: noaa-enhanced-handler-dev
[0;34m[INFO][0m Checking for in-progress updates...
[0;32m[SUCCESS][0m Lambda is ready for update
[0;34m[INFO][0m Uploading new code...
[0;34m[INFO][0m Waiting for code update to complete...
[0;34m[INFO][0m Updating function configuration...
[0;34m[INFO][0m Waiting for configuration update...
[0;32m[SUCCESS][0m Lambda deployed successfully
[0;34m[INFO][0m [6/7] Verifying IAM permissions...
[0;34m[INFO][0m Lambda Role: noaa-lambda-execution-role-dev
[0;32m[SUCCESS][0m Bedrock permissions already exist
[0;34m[INFO][0m [7/7] Setting up data ingestion schedules...
[0;34m[INFO][0m Creating EventBridge schedules for all ponds...
/Users/adambehnke/Projects/noaa_storefront/ingestion-scheduler/schedule_all_ingestions.py:583: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  print(f"   Time: {datetime.utcnow().isoformat()}")

ğŸŒŠ NOAA Federated Data Lake - Ingestion Scheduler
   Environment: dev
   Action: create_schedules
   Time: 2025-11-18T20:21:25.805529

======================================================================
Creating Ingestion Schedules for Environment: dev
======================================================================

[ATMOSPHERIC] Creating schedule: rate(15 minutes)
  Function: noaa-ingest-atmospheric-dev
  Priority: critical
  âœ“ Created/Updated EventBridge rule: noaa-ingest-atmospheric-schedule-dev
  âœ“ Added Lambda target to rule
  âœ“ Added EventBridge invoke permission
  âœ… Schedule created successfully

[OCEANIC] Creating schedule: rate(15 minutes)
  Function: noaa-ingest-oceanic-dev
  Priority: critical
  âœ“ Created/Updated EventBridge rule: noaa-ingest-oceanic-schedule-dev
  âœ“ Added Lambda target to rule
  â„¹ï¸  Permission already exists (OK)
  âœ… Schedule created successfully

[BUOY] Creating schedule: rate(15 minutes)
  Function: noaa-ingest-buoy-dev
  Priority: high
  âœ“ Created/Updated EventBridge rule: noaa-ingest-buoy-schedule-dev
  âœ“ Added Lambda target to rule
  âœ“ Added EventBridge invoke permission
  âœ… Schedule created successfully

[CLIMATE] Creating schedule: rate(60 minutes)
  Function: noaa-ingest-climate-dev
  Priority: medium
  âœ“ Created/Updated EventBridge rule: noaa-ingest-climate-schedule-dev
  âœ“ Added Lambda target to rule
  âœ“ Added EventBridge invoke permission
  âœ… Schedule created successfully

[SPATIAL] Creating schedule: rate(6 hours)
  Function: noaa-ingest-spatial-dev
  Priority: low
  âœ“ Created/Updated EventBridge rule: noaa-ingest-spatial-schedule-dev
  âœ“ Added Lambda target to rule
  âœ“ Added EventBridge invoke permission
  âœ… Schedule created successfully

[TERRESTRIAL] Creating schedule: rate(30 minutes)
  Function: noaa-ingest-terrestrial-dev
  Priority: medium
  âœ“ Created/Updated EventBridge rule: noaa-ingest-terrestrial-schedule-dev
  âœ“ Added Lambda target to rule
  âœ“ Added EventBridge invoke permission
  âœ… Schedule created successfully


======================================================================
SCHEDULE CREATION SUMMARY
======================================================================
âœ… Success: 6 ponds
âŒ Failed:  0 ponds
âš ï¸  Skipped: 0 ponds
======================================================================

Successfully scheduled:
  â€¢ atmospheric: rate(15 minutes)
  â€¢ oceanic: rate(15 minutes)
  â€¢ buoy: rate(15 minutes)
  â€¢ climate: rate(60 minutes)
  â€¢ spatial: rate(6 hours)
  â€¢ terrestrial: rate(30 minutes)

âœ… Operation completed successfully!

[0;34m[INFO][0m Checking schedule status...
/Users/adambehnke/Projects/noaa_storefront/ingestion-scheduler/schedule_all_ingestions.py:583: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  print(f"   Time: {datetime.utcnow().isoformat()}")
/Users/adambehnke/Projects/noaa_storefront/ingestion-scheduler/schedule_all_ingestions.py:365: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  end_time = datetime.utcnow()
/Users/adambehnke/Projects/noaa_storefront/ingestion-scheduler/schedule_all_ingestions.py:366: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  start_time = datetime.utcnow().replace(

ğŸŒŠ NOAA Federated Data Lake - Ingestion Scheduler
   Environment: dev
   Action: status
   Time: 2025-11-18T20:21:30.071622

======================================================================
Checking Ingestion Status for Environment: dev
======================================================================

[ATMOSPHERIC]
  Function: noaa-ingest-atmospheric-dev
  âœ“ Lambda exists
  â„¹ï¸  Invocations (last hour): 1
  âœ“ Schedule enabled: rate(15 minutes)

[OCEANIC]
  Function: noaa-ingest-oceanic-dev
  âœ“ Lambda exists
  â„¹ï¸  Invocations (last hour): 5
  âœ“ Schedule enabled: rate(15 minutes)

[BUOY]
  Function: noaa-ingest-buoy-dev
  âœ“ Lambda exists
  â„¹ï¸  Invocations (last hour): 3
  âš ï¸  Errors (last hour): 3
  âœ“ Schedule enabled: rate(15 minutes)

[CLIMATE]
  Function: noaa-ingest-climate-dev
  âœ“ Lambda exists
  â„¹ï¸  Invocations (last hour): 1
  âœ“ Schedule enabled: rate(60 minutes)

[SPATIAL]
  Function: noaa-ingest-spatial-dev
  âœ“ Lambda exists
  â„¹ï¸  Invocations (last hour): 1
  âœ“ Schedule enabled: rate(6 hours)

[TERRESTRIAL]
  Function: noaa-ingest-terrestrial-dev
  âœ“ Lambda exists
  â„¹ï¸  Invocations (last hour): 1
  âœ“ Schedule enabled: rate(30 minutes)


======================================================================
STATUS SUMMARY
======================================================================
Total Data Ponds:       6
Lambdas Deployed:       6/6
Schedules Enabled:      6/6
Recent Invocations:     12 (last hour)
Recent Errors:          3 (last hour)
======================================================================

âœ… All ingestion pipelines are operational!


âœ… Operation completed successfully!

[0;34m[INFO][0m Generating test script...
[0;32m[SUCCESS][0m Test script created: /Users/adambehnke/Projects/noaa_storefront/test-scripts/test_ai_queries.sh
[0;32m[SUCCESS][0m â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
[0;32m[SUCCESS][0m â•‘                 DEPLOYMENT COMPLETED                          â•‘
[0;32m[SUCCESS][0m â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[0;34m[INFO][0m Deployment Summary:
[0;34m[INFO][0m   Lambda: noaa-enhanced-handler-dev
[0;34m[INFO][0m   Package: 692K
[0;34m[INFO][0m   Backup: /Users/adambehnke/Projects/noaa_storefront/backups/20251118_142108
[0;34m[INFO][0m   Log: /Users/adambehnke/Projects/noaa_storefront/deployment/deployment_20251118_142108.log
[0;34m[INFO][0m Features Enabled:
[0;34m[INFO][0m Testing:
[0;34m[INFO][0m   Run: /Users/adambehnke/Projects/noaa_storefront/test-scripts/test_ai_queries.sh
[0;34m[INFO][0m Monitoring:
[0;34m[INFO][0m   CloudWatch Logs: aws logs tail /aws/lambda/noaa-enhanced-handler-dev --follow
[0;34m[INFO][0m   Schedule Status: cd ingestion-scheduler && python3 schedule_all_ingestions.py --action status --env dev
[0;34m[INFO][0m Documentation:
[0;34m[INFO][0m   Full Guide: documentation/AI_MULTI_POND_SYSTEM.md
[0;34m[INFO][0m   Quick Start: documentation/QUICK_START.txt
[1;33m[WARN][0m IMPORTANT: Test the deployment now!
[1;33m[WARN][0m   1. Open your webapp and ask: 'Plan a maritime route from Boston to Portland'
[1;33m[WARN][0m   2. Verify it queries atmospheric + oceanic + buoy ponds
[1;33m[WARN][0m   3. Check CloudWatch Logs for 'AI selected X ponds' messages
[0;34m[INFO][0m Rollback (if needed):
[0;34m[INFO][0m   cd /Users/adambehnke/Projects/noaa_storefront/lambda-enhanced-handler
[0;34m[INFO][0m   cp /Users/adambehnke/Projects/noaa_storefront/backups/20251118_142108/lambda_function.py.backup lambda_function.py
[0;34m[INFO][0m   zip -r lambda-enhanced-handler.zip .
[0;34m[INFO][0m   aws lambda update-function-code --function-name noaa-enhanced-handler-dev --zip-file fileb://lambda-enhanced-handler.zip
[0;32m[SUCCESS][0m ğŸ‰ Deployment successful! Your AI multi-pond system is live!
